<section class="content-header">
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> 综合值守</a></li>
        <li class="active">值班设置</li>
    </ol>
</section>
<!-- Main content -->
<section class="content" id="duty-setting">
    <div class="row">
        <div class="col-md-3">
            <div class="box box-primary">
                <div class="box-header text-center with-border">
                    <div class="box-title" onclick="dutySetting.openPlanPage()">班次设置</div>
                </div>
                <div class="box-body" style="min-height: 500px;">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-12">
                                <label class="control-label">
                                    <input type="radio" name="classType" checked>&nbsp;&nbsp;全班制
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3" style="padding-right:0px;">
                                <input type="text" class="form-control" value="全天" disabled>
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;">
                                <select class="form-control">
                                    <option name="" value="" selected>08:00</option>
                                    <option name="" value="">09:00</option>
                                    <option name="" value="">10:00</option>
                                    <option name="" value="">11:00</option>
                                    <option name="" value="">12:00</option>
                                </select>
                            </div>
                            <div class="col-sm-1" style="padding:0 5px;line-height: 30px;">
                                <label class="control-label">至</label>
                            </div>
                            <div class="col-sm-4" style="padding-left:0px;">
                                <select class="form-control">
                                    <option name="" value="">13:00</option>
                                    <option name="" value="">14:00</option>
                                    <option name="" value="">15:00</option>
                                    <option name="" value="">16:00</option>
                                    <option name="" value="">17:00</option>
                                    <option name="" value="" selected>18:00</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-12">
                                <label class="control-label">
                                    <input type="radio" name="classType">&nbsp;&nbsp;多班制
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3" style="padding-right:0px;">
                                <input type="text" class="form-control" value="早班" disabled>
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;">
                                <select class="form-control">
                                    <option name="" value="" selected>08:00</option>
                                    <option name="" value="">09:00</option>
                                    <option name="" value="">10:00</option>
                                    <option name="" value="">11:00</option>
                                    <option name="" value="">12:00</option>
                                </select>
                            </div>
                            <div class="col-sm-1" style="padding:0 5px;line-height: 30px;">
                                <label class="control-label">至</label>
                            </div>
                            <div class="col-sm-4" style="padding-left:0px;">
                                <select class="form-control">
                                    <option name="" value="">13:00</option>
                                    <option name="" value="">14:00</option>
                                    <option name="" value="" selected>15:00</option>
                                </select>
                            </div>
                        </div>
                        <div class="row" style="margin-top:5px;">
                            <div class="col-sm-3" style="padding-right:0px;">
                                <input type="text" class="form-control" value="晚班" disabled>
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;">
                                <select class="form-control">
                                    <option name="" value="" selected>15:00</option>
                                    <option name="" value="">16:00</option>
                                    <option name="" value="">17:00</option>
                                    <option name="" value="">18:00</option>
                                </select>
                            </div>
                            <div class="col-sm-1" style="padding:0 5px;line-height: 30px;">
                                <label class="control-label">至</label>
                            </div>
                            <div class="col-sm-4" style="padding-left:0px;">
                                <select class="form-control">
                                    <option name="" value="">19:00</option>
                                    <option name="" value="">20:00</option>
                                    <option name="" value="">21:00</option>
                                    <option name="" value="" selected>22:00</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <label class="control-label">&nbsp;&nbsp;值班备注</label>
                    <textarea class="form-control" style="min-height: 120px;width: 100%"
                              placeholder="默认全班值选中，多班制为两班，即早晚班"></textarea>
                </div>
                <div class="box-footer text-center">
                    <button type="submit" class="btn btn-primary" data-btn-type="save"><i class="fa fa-save"></i> 保存
                    </button>
                    <button type="button" class="btn btn-default" data-btn-type="cancel"><i
                            class="fa fa-remove"></i> 重置
                    </button>
                    <button type="button" class="btn btn-default" onclick="dutySetting.returnHome()" ><i
                            class="fa fa-mail-reply"></i> 返回
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="box box-solid">
                <div class="nav-tabs-custom" style="margin-top: 0px">
                    <ul class="nav nav-pills">
                        <li class="active text-center" style="width:45%"><a href="#duty_member"
                                                                            data-toggle="tab">值班员管理</a>
                        </li>
                        <li class="text-center" style="width: 45%"><a href="#duty_time" data-toggle="tab">特殊日期设置</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="duty_member">
                            <div class="row" style="padding-top: 0px;">
                                <div class="col-md-3">
                                    <div class="box">
                                        <h4 class="text-center">组织机构</h4>
                                        <div class="box-body" id="org-tree" style="min-height: 420px;overflow-y: auto">

                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <div class="box">
                                        <div class="dataTables_filter" class="searchDiv"
                                             style="text-align: left;margin:5px 10px;">
                                            <button type="button" class="btn btn-default"
                                                    onclick="dutySetting.openDutyAddDialog()"> 新增
                                            </button>
                                            <button type="button" class="btn btn-default">修改
                                            </button>
                                            <button type="button" class="btn btn-default">删除
                                            </button>
                                            <div class="pull-right">
                                                <input type="text" class="form-control" placeholder="请录入姓名查询">
                                                <div class="btn-group">
                                                    <button type="button" class="btn btn-primary"
                                                            data-btn-type="search"><i
                                                            class="fa fa-search"></i> 查询
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.box-header -->
                                        <div class="box-body">
                                            <table class="table table-bordered table-striped table-responsive"
                                                   id="dutyTable">
                                                <thead>
                                                <tr>
                                                    <th width="50px" class="text-center">序号</th>
                                                    <th field="receiveTime" width="150" class="text-center">姓名</th>
                                                    <th field="level" class="text-center" width="100">值班职务</th>
                                                    <th width="220" class="text-center">常用手机</th>
                                                    <th width="220" class="text-center">备用手机</th>
                                                    <th field="address" width="150">工作单位</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td class="text-center">1</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">2</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">3</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">4</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">5</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">6</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">7</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">8</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">9</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center">10</td>
                                                    <td class="text-center">刘德华</td>
                                                    <td class="text-center">处长</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">13601056532</td>
                                                    <td class="text-center">派出所</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.tab-pane -->
                        <div class="tab-pane" id="duty_time">
                            <div class="dataTables_filter" class="searchDiv"
                                 style="text-align: left;margin-bottom: 5px">
                                <button type="button" class="btn btn-default" onclick="dutySetting.openTimeAddDialog()">
                                    新增
                                </button>
                                <button type="button" class="btn btn-default">修改
                                </button>
                                <button type="button" class="btn btn-default">删除
                                </button>
                                <div class="pull-right">
                                    <input class="form-control" placeholder="请输入日期名称">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary" data-btn-type="search"><i
                                                class="fa fa-search"></i> 查询
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.box-header -->
                            <div class="box-body">
                                <table class="table table-bordered table-striped table-hover" id="dutyTable1">
                                    <thead>
                                    <tr>
                                        <th width="50px" class="text-center">序号</th>
                                        <th width="100" class="text-center">日期名称</th>
                                        <th field="type" width="150" class="text-center">开始日期</th>
                                        <th width="150" class="text-center">结束日期</th>
                                        <th field="level" class="text-center" width="100">编制人</th>
                                        <th field="receiveTime" width="150" class="text-center">编制时间</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="text-center">1</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">2</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">3</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">4</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">5</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">6</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">7</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">8</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>

                                    <tr>
                                        <td class="text-center">9</td>
                                        <td class="text-center">全班/早班</td>
                                        <td class="text-center">2018-07-22</td>
                                        <td class="text-center">2018-08-22</td>
                                        <td class="text-center">刘德华</td>
                                        <td class="text-center">2018-08-22 14:30</td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                    <!-- /.tab-content -->
                </div>
            </div>
        </div>
    </div>

</section>


<script>
    var dutySetting = {
        openPlanPage: function () {
            loadPage(basePath + "/duty/plan");
        },
        returnHome:function () {
          loadPage(basePath+"/duty/home");
        },
        openSettingPage: function () {
            loadPage(basePath + "/duty/set");
        },
        openTimeAddDialog: function () {
            modals.openWin({
                winId: 'time_add_win',
                title: '新增特殊日期',
                width: '680px',
                url: basePath + "/duty/time"
            });
        },
        initSearchDiv: function () {
            var form = $(".searchDiv").form({baseEntity: false});
            form.initComponent();
        },
        initTable: function () {
            /* $('#dutyTable').DataTable({
                 "paging": true,
                 "lengthChange": false,
                 "searching": false,
                 "ordering": false,
                 "info": true,
                 "autoWidth": false
             });*/
        },
        initTree: function (selectNodeId) {
            var self = this;
            var treeData = null;
            ajaxPost(basePath + "/org/treeData", null, function (data) {
                treeData = data;
            });
            $("#org-tree").treeview({
                data: treeData,
                showBorder: false,
                expandIcon: "glyphicon glyphicon-stop",
                collapseIcon: "glyphicon glyphicon-unchecked",
                levels: 1,
                onNodeSelected: function (event, data) {
                    //self.fillOrgForm(data);
                    //self.formReadonly();
                }
            });
            if (treeData.length == 0)
                return;
            //默认选中第一个节点
            selectNodeId = selectNodeId || 0;
            $("#org-tree").data('treeview').selectNode(selectNodeId);
            $("#org-tree").data('treeview').expandNode(selectNodeId);
            $("#org-tree").data('treeview').revealNode(selectNodeId);
        },
        openDutyAddDialog: function () {
            modals.openWin({
                winId: 'duty_add_win',
                title: '新增值班员',
                width: '800px',
                url: basePath + "/duty/add"
            });
        }

    };
    $(function () {
        dutySetting.initSearchDiv();
        //dutySetting.showSearchDiv();
        dutySetting.initTree(0);
        dutySetting.initTable();
    })

</script>